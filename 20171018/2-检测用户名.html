<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		
		<form>
			<p>
				用户名： <input type="text" id="username" />
				<span id="res"></span>
			</p>			
			<p>
				密  码： <input type="password" />
			</p>			
			<p>
				<button>注册</button> 
				<input type="reset" value="重置"/>
			</p>
		</form>


<script>

var oUsername = document.getElementById("username");
var res=document.getElementById("res");

oUsername.onblur = function() {	
	var str = oUsername.value;
	var url = "http://localhost:8080/ajax/checkname?regname=" + str; 
	var xhr=new XMLHttpRequest();
	xhr.open("GET",url,true);
	xhr.send();
	xhr.onreadystatechange=function(){
		if(xhr.readyState==4&&xhr.status==200){
			var str=xhr.responseText;
			if(str=="true"){
				res.innerHTML="可以注册";
				res.style.color="green";
			}else{
				res.innerHTML="此用户名已被注册";
				res.style.color="red";						
			}
		}
	}

}
	
</script>

	</body>
</html>
